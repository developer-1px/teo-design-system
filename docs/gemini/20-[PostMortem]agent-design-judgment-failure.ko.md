# [PostMortem] 에이전트 디자인 판단 실패 분석 (Agent Design Judgment Failure)

**작성일:** 2026-01-16
**주제:** 왜 에이전트(저)는 "클릭하기 어려운 작은 아이템"을 보고도 "잘된 디자인"이라고 판단했는가?
**목적:** MDK 시스템이 에이전트의 디자인 의사결정을 더 잘 돕기 위한 개선점 도출

## 1. 실패 현상 정의 (The Failure)

-   **상황:** `CommandItem`을 구현하면서 수평 패딩(`px`)만 주고 수직 패딩(`py`)을 누락함.
-   **결과:** 아이템 높이가 텍스트 높이만큼 줄어들어 시각적으로 답답하고 클릭하기 힘든 "나쁜 디자인"이 됨.
-   **오판:** 그럼에도 불구하고 Self-Evaluation에서 "규칙을 잘 지켰다"며 98점의 높은 점수를 부여함.

## 2. 원인 분석 (Root Cause Analysis)

제가 "나쁜 디자인"을 승인한 이유는 **"규칙 준수(Compliance)"를 "디자인 의도(Intent)"보다 상위 개념으로 착각했기 때문**입니다. 구체적인 사고 과정의 오류는 다음과 같습니다.

### 2.1. 프리셋에 대한 과도한 신뢰 (Preset Relying Bias)

-   **나의 가정:** "`Layout.Row.Item.Default`라는 프리셋을 썼으니, 이것이 '표준 아이템'의 형태를 갖춰줄 것이다."
-   **실제 코드:**
    ```typescript
    case Layout.Row.Item.Default:
      return { row: true, align: "center", pack: "start", gap: Space.n12 };
    ```
    이 프리셋은 "배치(가로 정렬, 간격)"만 정의할 뿐, **"크기(높이, 패딩)"는 정의하지 않습니다.**
-   **오류:** 저는 `Layout`(배치)과 `Component Definition`(형태)을 혼동했습니다. `Layout` 토큰이 형태까지 책임져줄 것이라 믿고 방심했습니다. 반면 `Layout.Row.Header`는 `h: Size.n44`를 포함하고 있어, 이런 불일치가 혼란을 가중시켰습니다.

### 2.2. "Physics over Painting"의 잘못된 해석

-   **나의 해석:** "CSS를 직접 칠하지 말라는 것은, `padding` 같은 값을 최소화하라는 뜻이다. 꼭 필요한 것(`px`)만 넣고 나머지는 시스템에 맡기자."
-   **실제 의미:** "임의의 값(13px)을 쓰지 말고 토큰(`Space.n12`)을 써서 물성을 정의하라."
-   **오류:** "토큰을 사용하여 넉넉한 공간을 확보하라"는 적극적인 디자인 행위 대신, "아무것도 안 하는 것"이 시스템을 따르는 것이라고 소극적으로 판단했습니다.

### 2.3. 시각적 경험 부재와 휴리스틱의 한계

-   사람은 결과물을 "보면서" *'어, 너무 좁네'*라고 직관적으로 느낍니다.
-   저는 코드를 "읽으면서" *'토큰 썼음? OK. 프리셋 썼음? OK.'*라고 논리적으로 판단합니다.
-   **결론:** 제 판단 기준(Audit Checklist)에 "적절한 터치 타겟 크기(약 40px 이상)가 확보되었는가?"라는 항목이 없었기 때문에, 구문론적(Syntax)으로는 완벽하지만 미학적/사용성(UX)으로는 실패한 디자인을 걸러내지 못했습니다.

### 2.4. 검증 절차 누락 (Verification Failure)

**질문:** "Layout에 어떤 값들이 들어가는지 확인하지 않았어?"
**팩트 체크:** 
- 저는 구현 단계(Step 29) 이전에 `Layout.ts` 파일을 **열어보지 않았습니다.**
- `FrameProps.ts`에서 `LayoutToken`이라는 타입이 있다는 것만 확인하고, 실제 프리셋의 정의(`Layout.ts`)는 확인하지 않은 채 이름(`Layout.Row.Item.Default`)만 보고 "아이템다운 스타일이겠거니"라고 추측했습니다.

**오류의 본질:**
"확인하지 않고 추측함(Guessed without verifying)."
시스템을 맹신한 나머지, 시스템이 실제로 무엇을 반환하는지 확인하는 기초적인 엔지니어링 절차를 생략했습니다. 만약 구현 전에 `Layout.ts`를 `view_file`로 확인했다면, `py`나 `h`가 없다는 것을 보고 즉시 `override`에 패딩을 추가했을 것입니다.

## 3. 개선 제안 (Recommendations for MDK Improvement)

이 프로젝트의 목적이 "AI가 알아서 디자인을 잘 하게 만드는 것"이라면, AI가 실수하기 쉬운 구멍(함정)을 시스템 차원에서 메워야 합니다.

### 3.1. 프리셋에 '최소한의 형태' 포함 고려

`Layout.Row.Item` 계열에도 최소한의 `py` 혹은 `minHeight`를 포함시키는 것을 고려해야 합니다.

**Before:**
```typescript
{ row: true, gap: Space.n12 } // 뼈대만 있음
```

**After (제안):**
```typescript
{ row: true, gap: Space.n12, minHeight: Size.n40 } // 최소한의 사용성 보장
```
AI는 "Item을 썼으니 Item답게 나오겠지"라고 기대합니다. 그 기대를 시스템이 충족시켜주면 "알아서 잘 디자인"하는 결과가 나옵니다.

### 3.2. 또는 'Shape' 개념 도입

만약 `Layout`이 순수 배치만 담당해야 한다면, 형태를 담당하는 별도의 토큰이나 프리셋(예: `Shape`)이 필요할 수 있습니다.
-   예: `<Frame layout={...} shape="list.item">`
-   AI에게 "리스트 아이템을 만들 땐 `shape`를 꼭 지정해"라고 가이드하면, 패딩 누락 실수를 방지할 수 있습니다.

### 3.3. 에이전트 가이드라인 업데이트

"Layout 프리셋은 '배치'만 담당한다. '여백(Breathing Room)'은 너의 몫이다."라고 명시해야 합니다. AI에게 "적극적으로 `py`를 주어라"는 지침이 필요합니다.

## 4. 최종 반성

저는 "시스템에 순응하는 것"을 최우선으로 하느라 "사용자가 느낄 불편함"을 간과했습니다. 좋은 디자인 시스템은 제약을 지키는 것 자체가 좋은 결과물로 이어져야 합니다. 현재의 MDK 설정(Item 프리셋)은 에이전트가 "방심하면 나쁜 결과"가 나오게 되어 있습니다. 이 부분이 개선된다면 저는 더 쉽게 "좋은 디자인"을 할 수 있을 것입니다.
