/**
 * TailwindCSS 4 Design System - 3-Tier Token Architecture
 *
 * Tier 1: Primitive Tokens - 기본 원자 값 (색상, 간격, 반경)
 * Tier 2: Semantic Tokens - 의미론적 역할 (surface, text, border)
 * Tier 3: Component Tokens - 컴포넌트별 토큰 (button, input, panel)
 *
 * IDDL Integration:
 * - Prominence → Surface levels
 * - Intent → Semantic colors
 * - Density → Spacing multiplier
 */

@theme {
  /* ============================================================================
     TIER 1: PRIMITIVE TOKENS
     기본 색상 팔레트 - 모든 토큰의 기초
     ============================================================================ */

  /* Gray Scale (Neutral) */
  --color-gray-50: #fafafa;
  --color-gray-100: #f5f5f5;
  --color-gray-200: #e5e5e5;
  --color-gray-300: #d4d4d4;
  --color-gray-400: #a3a3a3;
  --color-gray-500: #737373;
  --color-gray-600: #525252;
  --color-gray-700: #404040;
  --color-gray-800: #262626;
  --color-gray-900: #171717;
  --color-gray-950: #0a0a0a;

  /* Emerald (Primary/Brand) */
  --color-emerald-50: #ecfdf5;
  --color-emerald-100: #d1fae5;
  --color-emerald-200: #a7f3d0;
  --color-emerald-500: #10b981;
  --color-emerald-600: #059669;
  --color-emerald-700: #047857;
  --color-emerald-800: #065f46;
  --color-emerald-900: #064e3b;

  /* Blue (Alternative Brand) */
  --color-blue-50: #eff6ff;
  --color-blue-100: #dbeafe;
  --color-blue-600: #3b82f6;
  --color-blue-700: #2563eb;
  --color-blue-900: #1e3a8a;

  /* Purple (Alternative Brand) */
  --color-purple-50: #faf5ff;
  --color-purple-100: #f3e8ff;
  --color-purple-600: #a855f7;
  --color-purple-700: #9333ea;
  --color-purple-900: #581c87;

  /* Red (Alternative Brand) */
  --color-red-50: #fef2f2;
  --color-red-100: #fee2e2;
  --color-red-600: #ef4444;
  --color-red-700: #dc2626;
  --color-red-900: #7f1d1d;

  /* Semantic Primitives */
  --color-green-600: #22c55e;
  --color-orange-600: #f59e0b;
  --color-rose-600: #e11d48;
  --color-sky-600: #0284c7;

  /* Spacing Primitives */
  --spacing-0: 0;
  --spacing-1: 0.25rem;
  --spacing-2: 0.5rem;
  --spacing-3: 0.75rem;
  --spacing-4: 1rem;
  --spacing-6: 1.5rem;
  --spacing-8: 2rem;
  --spacing-12: 3rem;
  --spacing-16: 4rem;

  /* Radius Primitives */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;
  --radius-full: 9999px;

  /* Shadow Primitives */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

  /* ============================================================================
     TIER 2: SEMANTIC TOKENS
     의미론적 역할 기반 토큰 - Primitive를 참조
     ============================================================================ */

  /* Surface (Background layers - 7-Layer System mapping) */
  --color-surface-base: var(--color-gray-50);
  /* Layer 0: App background */
  --color-surface-sunken: var(--color-gray-100);
  /* Layer 1: Inputs, terminals */
  --color-surface: white;
  /* Layer 2: Sidebar, panels */
  --color-surface-raised: white;
  /* Layer 3: Editor, main content */
  --color-surface-elevated: white;
  /* Layer 4: Toolbars, active tabs */
  --color-surface-floating: white;
  /* Layer 5: Dropdowns, popovers */
  --color-surface-overlay: white;
  /* Layer 6: Modals, dialogs */

  /* Text (IDDL Text prominence) */
  --color-text: var(--color-gray-900);
  /* Primary text */
  --color-text-muted: var(--color-gray-600);
  /* Secondary text */
  --color-text-subtle: var(--color-gray-400);
  /* Tertiary text */
  --color-text-inverse: white;
  /* On dark backgrounds */

  /* Border */
  --color-border-default: var(--color-gray-200);
  /* Standard borders */
  --color-border-muted: var(--color-gray-100);
  /* Subtle borders */
  --color-border-strong: var(--color-gray-300);
  /* Emphasized borders */

  /* Primary (Brand - IDDL Intent: Brand) */
  --color-primary: var(--color-emerald-600);
  --color-primary-hover: var(--color-emerald-700);
  --color-primary-subtle: var(--color-emerald-100);
  --color-on-primary: white;
  /* Text on primary background */

  /* Accent (Alias for Primary - backward compatibility) */
  --color-accent: var(--color-primary);
  --color-accent-hover: var(--color-primary-hover);
  --color-accent-subtle: var(--color-primary-subtle);
  --color-on-accent: var(--color-on-primary);

  /* Semantic States (IDDL Intent mapping) */
  --color-success: var(--color-green-600);
  /* Positive */
  --color-success-hover: #16a34a;
  /* green-700 */
  --color-warning: var(--color-orange-600);
  /* Caution */
  --color-warning-hover: #d97706;
  /* orange-700 */
  --color-error: var(--color-rose-600);
  /* Critical */
  --color-error-hover: #be123c;
  /* rose-700 */
  --color-info: var(--color-sky-600);
  /* Info */
  --color-info-hover: #0369a1;
  /* sky-700 */

  /* Interactive States */
  --color-hover: var(--color-gray-100);
  --color-active: var(--color-gray-200);
  --color-focus: var(--color-primary);

  /* ============================================================================
     TIER 3: COMPONENT TOKENS
     컴포넌트별 토큰 - Semantic을 참조
     ============================================================================ */

  /* Button */
  --button-bg-primary: var(--color-primary);
  --button-bg-primary-hover: var(--color-primary-hover);
  --button-text-primary: var(--color-on-primary);
  --button-bg-secondary: var(--color-surface-elevated);
  --button-border-secondary: var(--color-border-default);
  --button-radius: var(--radius-md);

  /* Input */
  --input-bg: var(--color-surface-sunken);
  --input-border: var(--color-border-default);
  --input-border-focus: var(--color-focus);
  --input-text: var(--color-text);
  --input-placeholder: var(--color-text-subtle);
  --input-radius: var(--radius-md);

  /* Panel */
  --panel-bg: var(--color-surface);
  --panel-bg-elevated: var(--color-surface-elevated);
  --panel-border: var(--color-border-muted);
  --panel-shadow: var(--shadow-sm);
  --panel-radius: var(--radius-lg);

  /* Card */
  --card-bg: var(--color-surface-elevated);
  --card-border: var(--color-border-default);
  --card-shadow: var(--shadow-md);
  --card-radius: var(--radius-lg);

  /* Focus Ring (Accessibility) */
  --focus-ring-color: var(--color-primary);
  --focus-ring-width: 2px;
  --focus-ring-offset: 2px;

  /* Density Multiplier (IDDL Density) */
  --density: 1;
}

/* ============================================================================
   DARK THEME
   ============================================================================ */

/**
 * Note: TailwindCSS 4의 @theme은 최상위에서만 사용 가능
 * media query와 data-theme 셀렉터는 일반 CSS 변수 오버라이드 사용
 */
@media (prefers-color-scheme: dark) {
  :root {
    /* Surface - Dark mode (7-Layer System) */
    --color-surface-base: var(--color-gray-950);
    --color-surface-sunken: var(--color-gray-900);
    --color-surface: var(--color-gray-900);
    --color-surface-raised: var(--color-gray-800);
    --color-surface-elevated: var(--color-gray-800);
    --color-surface-floating: var(--color-gray-700);
    --color-surface-overlay: var(--color-gray-700);

    /* Text - Dark mode */
    --color-text: var(--color-gray-50);
    --color-text-muted: var(--color-gray-400);
    --color-text-subtle: var(--color-gray-500);
    --color-text-inverse: var(--color-gray-900);

    /* Border - Dark mode */
    --color-border-default: var(--color-gray-700);
    --color-border-muted: var(--color-gray-800);
    --color-border-strong: var(--color-gray-600);

    /* Primary subtle - Dark mode */
    --color-primary-subtle: var(--color-emerald-900);

    /* Intent Colors - Dark mode (Lighter/Vibrant for contrast) */
    --color-success: var(--color-green-500);
    --color-warning: var(--color-orange-500);
    --color-error: var(--color-rose-500);
    --color-info: var(--color-sky-500);

    /* Interactive States - Dark mode */
    --color-hover: var(--color-gray-800);
    --color-active: var(--color-gray-700);
  }
}

/* Manual theme toggle - 사용자 선택 테마가 시스템 자동 감지보다 우선 */

/* 사용자가 명시적으로 라이트 테마를 선택한 경우 */
[data-theme='light'] {
  --color-surface-base: var(--color-gray-50);
  --color-surface-sunken: var(--color-gray-100);
  --color-surface: white;
  --color-surface-raised: white;
  --color-surface-elevated: white;
  --color-surface-floating: white;
  --color-surface-overlay: white;

  --color-text: var(--color-gray-900);
  --color-text-muted: var(--color-gray-600);
  --color-text-subtle: var(--color-gray-400);
  --color-text-inverse: white;

  --color-border-default: var(--color-gray-200);
  --color-border-muted: var(--color-gray-100);
  --color-border-strong: var(--color-gray-300);

  --color-success: var(--color-green-600);
  --color-warning: var(--color-orange-600);
  --color-error: var(--color-rose-600);
  --color-info: var(--color-sky-600);

  --color-primary-subtle: var(--color-emerald-100);

  --color-hover: var(--color-gray-100);
  --color-active: var(--color-gray-200);
}

/* 사용자가 명시적으로 다크 테마를 선택한 경우 */
[data-theme='dark'] {
  --color-surface-base: var(--color-gray-950);
  --color-surface-sunken: var(--color-gray-900);
  --color-surface: var(--color-gray-900);
  --color-surface-raised: var(--color-gray-800);
  --color-surface-elevated: var(--color-gray-800);
  --color-surface-floating: var(--color-gray-700);
  --color-surface-overlay: var(--color-gray-700);

  --color-text: var(--color-gray-50);
  --color-text-muted: var(--color-gray-400);
  --color-text-subtle: var(--color-gray-500);
  --color-text-inverse: var(--color-gray-900);

  --color-border-default: var(--color-gray-700);
  --color-border-muted: var(--color-gray-800);
  --color-border-strong: var(--color-gray-600);

  --color-success: var(--color-green-500);
  --color-warning: var(--color-orange-500);
  --color-error: var(--color-rose-500);
  --color-info: var(--color-sky-500);

  --color-primary-subtle: var(--color-emerald-900);

  --color-hover: var(--color-gray-800);
  --color-active: var(--color-gray-700);
}

/* ============================================================================
   COLOR SCHEME VARIANTS
   ============================================================================ */

[data-color-scheme='blue'] {
  --color-primary: var(--color-blue-600);
  --color-primary-hover: var(--color-blue-700);
  --color-primary-subtle: var(--color-blue-100);
}

[data-theme='dark'][data-color-scheme='blue'] {
  --color-primary-subtle: var(--color-blue-900);
}

[data-color-scheme='purple'] {
  --color-primary: var(--color-purple-600);
  --color-primary-hover: var(--color-purple-700);
  --color-primary-subtle: var(--color-purple-100);
}

[data-theme='dark'][data-color-scheme='purple'] {
  --color-primary-subtle: var(--color-purple-900);
}

[data-color-scheme='red'] {
  --color-primary: var(--color-red-600);
  --color-primary-hover: var(--color-red-700);
  --color-primary-subtle: var(--color-red-100);
}

[data-theme='dark'][data-color-scheme='red'] {
  --color-primary-subtle: var(--color-red-900);
}

/* ============================================================================
   DENSITY MODES (IDDL Density)
   ============================================================================ */

[data-density='compact'] {
  --density: 0.75;
}

[data-density='comfortable'] {
  --density: 1.25;
}

[data-density='standard'] {
  --density: 1;
}

/* ============================================================================
   GLOBAL STYLES
   ============================================================================ */

* {
  border-color: var(--color-border-default);
}

body {
  background-color: var(--color-surface-base);
  color: var(--color-text);
}

button {
  border-radius: var(--button-radius);
  cursor: pointer;
}

input,
textarea,
select {
  background-color: var(--input-bg);
  color: var(--input-text);
  border: 1px solid var(--input-border);
  border-radius: var(--input-radius);
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

input:focus,
textarea:focus,
select:focus {
  outline: none;
  border-color: var(--input-border-focus);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 10%, transparent);
}

img,
video {
  border-radius: var(--radius-lg);
}

pre,
code {
  border-radius: var(--radius-md);
}

hr {
  border-color: var(--color-border-default);
}

a {
  color: var(--color-primary);
  transition: color 0.15s ease;
}

a:hover {
  color: var(--color-primary-hover);
}

::selection {
  background-color: var(--color-primary-subtle);
  color: var(--color-text);
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-surface-base);
  border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border-default);
  border-radius: var(--radius-sm);
  transition: background-color 0.15s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-subtle);
}